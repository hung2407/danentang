
[2025-05-22 11:12:36] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://f613-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://f613-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 11:23:44] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "170",
  "amount": 180000,
  "orderInfo": "Thanh toán đặt chỗ K08 - 2025-05-23",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 11:23:44] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "170"
}

[2025-05-22 11:23:44] Đã tạo bản ghi thanh toán:
{
  "paymentId": 254,
  "bookingId": "170",
  "amount": 180000
}

[2025-05-22 11:23:44] Phát hiện URL trả về từ ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:23:44] URL trả về được sử dụng cho VNPay:
https://f613-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 11:23:44] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522112344170",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K08 - 2025-05-23",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "18000000",
  "vnp_ReturnUrl": "https://f613-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "192.168.0.100",
  "vnp_CreateDate": "20250522112344",
  "vnp_BankCode": "NCB"
}

[2025-05-22 11:23:44] Chuỗi dữ liệu signData VNPay:
vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522112344&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K08+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Ff613-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522112344170&vnp_Version=2.1.0

[2025-05-22 11:23:44] Chữ ký VNPay đã tạo:
3e1c347973fe12cbaa95249cb46d993a641de2fce5cef3c5f2603aada0adac786809ba4d99f2d6b65a6587a5421652d346191e122c5e22546288c1541405d621

[2025-05-22 11:23:44] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522112344&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K08+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Ff613-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522112344170&vnp_Version=2.1.0&vnp_SecureHash=3e1c347973fe12cbaa95249cb46d993a641de2fce5cef3c5f2603aada0adac786809ba4d99f2d6b65a6587a5421652d346191e122c5e22546288c1541405d621

[2025-05-22 11:23:44] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 254,
  "orderId": "20250522112344170",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 11:23:44] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522112344&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K08+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Ff613-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522112344170&vnp_Version=2.1.0&vnp_SecureHash=3e1c347973fe12cbaa95249cb46d993a641de2fce5cef3c5f2603aada0adac786809ba4d99f2d6b65a6587a5421652d346191e122c5e22546288c1541405d621"
}

[2025-05-22 11:31:35] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "170",
  "amount": 180000,
  "orderInfo": "Thanh toán đặt chỗ K08 - 2025-05-23",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 11:31:35] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "170"
}

[2025-05-22 11:31:35] Đã tạo bản ghi thanh toán:
{
  "paymentId": 255,
  "bookingId": "170",
  "amount": 180000
}

[2025-05-22 11:31:35] Phát hiện URL trả về từ ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:31:35] URL trả về được sử dụng cho VNPay:
https://f613-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 11:31:35] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522113135170",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K08 - 2025-05-23",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "18000000",
  "vnp_ReturnUrl": "https://f613-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "192.168.0.100",
  "vnp_CreateDate": "20250522113135",
  "vnp_BankCode": "NCB"
}

[2025-05-22 11:31:35] Chuỗi dữ liệu signData VNPay:
vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522113135&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K08+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Ff613-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522113135170&vnp_Version=2.1.0

[2025-05-22 11:31:35] Chữ ký VNPay đã tạo:
386272715829205e8e44e06844a67841d79d6632679b7505df421ea90cc2b331958fc233a54db4ab2607289c02ef3a7ae5576df27f7644268763b6e2e9956699

[2025-05-22 11:31:35] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522113135&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K08+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Ff613-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522113135170&vnp_Version=2.1.0&vnp_SecureHash=386272715829205e8e44e06844a67841d79d6632679b7505df421ea90cc2b331958fc233a54db4ab2607289c02ef3a7ae5576df27f7644268763b6e2e9956699

[2025-05-22 11:31:35] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 255,
  "orderId": "20250522113135170",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 11:31:35] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522113135&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K08+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Ff613-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522113135170&vnp_Version=2.1.0&vnp_SecureHash=386272715829205e8e44e06844a67841d79d6632679b7505df421ea90cc2b331958fc233a54db4ab2607289c02ef3a7ae5576df27f7644268763b6e2e9956699"
}

[2025-05-22 11:34:19] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "171",
  "amount": 180000,
  "orderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 11:34:19] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "171"
}

[2025-05-22 11:34:19] Đã tạo bản ghi thanh toán:
{
  "paymentId": 257,
  "bookingId": "171",
  "amount": 180000
}

[2025-05-22 11:34:19] Phát hiện URL trả về từ ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:34:19] URL trả về được sử dụng cho VNPay:
https://f613-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 11:34:19] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522113419171",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "18000000",
  "vnp_ReturnUrl": "https://f613-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "192.168.0.100",
  "vnp_CreateDate": "20250522113419",
  "vnp_BankCode": "NCB"
}

[2025-05-22 11:34:19] Chuỗi dữ liệu signData VNPay:
vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522113419&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Ff613-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522113419171&vnp_Version=2.1.0

[2025-05-22 11:34:19] Chữ ký VNPay đã tạo:
b4decf3a7ede121524454bf788fb216eef2422b1b83b1600770450df2710bdcef593db473ffc50c5a6780b374d746f14009e3f67d16bda00df14d15b1478bea8

[2025-05-22 11:34:19] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522113419&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Ff613-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522113419171&vnp_Version=2.1.0&vnp_SecureHash=b4decf3a7ede121524454bf788fb216eef2422b1b83b1600770450df2710bdcef593db473ffc50c5a6780b374d746f14009e3f67d16bda00df14d15b1478bea8

[2025-05-22 11:34:19] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 257,
  "orderId": "20250522113419171",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 11:34:19] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522113419&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Ff613-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522113419171&vnp_Version=2.1.0&vnp_SecureHash=b4decf3a7ede121524454bf788fb216eef2422b1b83b1600770450df2710bdcef593db473ffc50c5a6780b374d746f14009e3f67d16bda00df14d15b1478bea8"
}

[2025-05-22 11:37:48] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "172",
  "amount": 90000,
  "orderInfo": "Thanh toán đặt chỗ K14 - 2025-05-23",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 11:37:48] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "172"
}

[2025-05-22 11:37:48] Đã tạo bản ghi thanh toán:
{
  "paymentId": 259,
  "bookingId": "172",
  "amount": 90000
}

[2025-05-22 11:37:48] Phát hiện URL trả về từ ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:37:48] URL trả về được sử dụng cho VNPay:
https://f613-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 11:37:48] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522113748172",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K14 - 2025-05-23",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "9000000",
  "vnp_ReturnUrl": "https://f613-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "192.168.0.100",
  "vnp_CreateDate": "20250522113748",
  "vnp_BankCode": "NCB"
}

[2025-05-22 11:37:48] Chuỗi dữ liệu signData VNPay:
vnp_Amount=9000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522113748&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K14+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Ff613-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522113748172&vnp_Version=2.1.0

[2025-05-22 11:37:48] Chữ ký VNPay đã tạo:
a2c4dd8dd247495f2ce8203c4c4c2bd2affe740ec913c8125346a90fc88388ccbf086832e8b8dc43ea9116e4548e75c2bab1da9004a8eb6d6622604f488bbc77

[2025-05-22 11:37:48] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=9000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522113748&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K14+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Ff613-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522113748172&vnp_Version=2.1.0&vnp_SecureHash=a2c4dd8dd247495f2ce8203c4c4c2bd2affe740ec913c8125346a90fc88388ccbf086832e8b8dc43ea9116e4548e75c2bab1da9004a8eb6d6622604f488bbc77

[2025-05-22 11:37:48] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 259,
  "orderId": "20250522113748172",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 11:37:48] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=9000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522113748&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K14+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Ff613-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522113748172&vnp_Version=2.1.0&vnp_SecureHash=a2c4dd8dd247495f2ce8203c4c4c2bd2affe740ec913c8125346a90fc88388ccbf086832e8b8dc43ea9116e4548e75c2bab1da9004a8eb6d6622604f488bbc77"
}

[2025-05-22 11:47:38] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 11:48:48] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 11:49:09] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 11:51:41] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 11:52:41] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "173",
  "amount": 180000,
  "orderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 11:52:41] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "173"
}

[2025-05-22 11:52:41] Đã tạo bản ghi thanh toán:
{
  "paymentId": 261,
  "bookingId": "173",
  "amount": 180000
}

[2025-05-22 11:52:41] Phát hiện URL trả về từ ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:52:41] URL trả về được sử dụng cho VNPay:
https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 11:52:41] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522115241173",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "18000000",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "192.168.0.100",
  "vnp_CreateDate": "20250522115241",
  "vnp_BankCode": "NCB"
}

[2025-05-22 11:52:41] Chuỗi dữ liệu signData VNPay:
vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522115241&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522115241173&vnp_Version=2.1.0

[2025-05-22 11:52:41] Chữ ký VNPay đã tạo:
9ba0bb60fbe6dcb54a93256ccd425c489c9f09490ef5ba4844941c2250bd087da1f1e86b485a1ab101efd95ec2f8cbc4b57f4a229508ba3290d6816c66de7c89

[2025-05-22 11:52:41] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522115241&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522115241173&vnp_Version=2.1.0&vnp_SecureHash=9ba0bb60fbe6dcb54a93256ccd425c489c9f09490ef5ba4844941c2250bd087da1f1e86b485a1ab101efd95ec2f8cbc4b57f4a229508ba3290d6816c66de7c89

[2025-05-22 11:52:41] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 261,
  "orderId": "20250522115241173",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 11:52:41] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522115241&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522115241173&vnp_Version=2.1.0&vnp_SecureHash=9ba0bb60fbe6dcb54a93256ccd425c489c9f09490ef5ba4844941c2250bd087da1f1e86b485a1ab101efd95ec2f8cbc4b57f4a229508ba3290d6816c66de7c89"
}

[2025-05-22 11:54:12] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:12] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:12] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:12] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:12] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:12] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:12] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:14] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:14] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:14] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:14] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:14] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:14] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:14] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:15] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:15] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:15] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:15] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:15] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:15] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:15] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:15] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:15] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:15] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:15] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:15] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:15] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:15] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:16] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:16] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:16] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:16] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:16] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:16] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:16] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:16] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:16] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:16] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:16] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:16] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:16] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:16] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:16] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:16] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:16] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:16] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:16] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:16] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:16] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:16] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:16] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:16] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:16] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:16] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:16] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:16] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:16] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:16] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:16] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:16] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:16] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:16] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:16] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:17] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:17] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:17] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:17] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:17] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:17] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:17] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:17] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:17] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:17] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:17] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:17] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:17] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:17] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:17] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:17] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:17] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:17] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:17] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:17] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:17] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:17] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:17] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:17] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:17] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:17] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:17] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:17] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:17] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:17] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:17] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:17] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:17] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:17] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:17] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:17] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:17] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:17] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:17] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:17] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:17] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:17] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:18] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:18] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:18] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:18] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:18] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:18] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:18] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:18] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:18] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:18] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:18] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:18] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:18] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:18] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:18] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:18] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:18] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:18] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:18] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:18] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:18] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:18] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:18] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:18] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:18] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:18] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:18] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:18] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:19] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:19] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:19] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:19] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:19] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:19] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:19] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 11:54:19] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972558",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
    "vnp_PayDate": "20250522115337",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972558",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522115241173",
    "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
  },
  "ip": "::1"
}

[2025-05-22 11:54:19] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972558",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K12 - 2025-05-23",
  "vnp_PayDate": "20250522115337",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972558",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522115241173",
  "vnp_SecureHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d"
}

[2025-05-22 11:54:19] Xác minh trả về:
{
  "receivedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "calculatedHash": "3ca9a542dca70f0cde71e0dffee4030e47c8cba5d24e551fd2d1641c7ef2aae19da52671930de2faa5310a6992f042cc2cb401a21e1860165726f0ee5a5dc13d",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972558&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K12+-+2025-05-23&vnp_PayDate=20250522115337&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972558&vnp_TransactionStatus=00&vnp_TxnRef=20250522115241173"
}

[2025-05-22 11:54:19] Thanh toán thành công
{
  "orderId": "20250522115241173",
  "amount": 180000
}

[2025-05-22 11:54:19] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'transaction_ref' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 11:54:19] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 11:54:19] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 12:06:40] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 12:08:15] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "174",
  "amount": 180000,
  "orderInfo": "Thanh toán đặt chỗ K06 - 2025-05-23",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 12:08:15] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "174"
}

[2025-05-22 12:08:15] Đã tạo bản ghi thanh toán:
{
  "paymentId": 263,
  "bookingId": "174",
  "amount": 180000
}

[2025-05-22 12:08:15] Phát hiện URL trả về từ ứng dụng di động:
parkingapp://payment-result

[2025-05-22 12:08:15] URL trả về được sử dụng cho VNPay:
https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 12:08:15] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522120815174",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K06 - 2025-05-23",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "18000000",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "192.168.0.100",
  "vnp_CreateDate": "20250522120815",
  "vnp_BankCode": "NCB"
}

[2025-05-22 12:08:15] Chuỗi dữ liệu signData VNPay:
vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522120815&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K06+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522120815174&vnp_Version=2.1.0

[2025-05-22 12:08:15] Chữ ký VNPay đã tạo:
7e0c77e0d17238b5c1a6d264db7d44d5aedf36de1b0024ee623d58b52a9eca1ca07d2cc804e9e69ae52149ba5b3a9438f3c24cf6a05d99397e31b114cfc085d5

[2025-05-22 12:08:15] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522120815&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K06+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522120815174&vnp_Version=2.1.0&vnp_SecureHash=7e0c77e0d17238b5c1a6d264db7d44d5aedf36de1b0024ee623d58b52a9eca1ca07d2cc804e9e69ae52149ba5b3a9438f3c24cf6a05d99397e31b114cfc085d5

[2025-05-22 12:08:15] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 263,
  "orderId": "20250522120815174",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 12:08:15] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522120815&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K06+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522120815174&vnp_Version=2.1.0&vnp_SecureHash=7e0c77e0d17238b5c1a6d264db7d44d5aedf36de1b0024ee623d58b52a9eca1ca07d2cc804e9e69ae52149ba5b3a9438f3c24cf6a05d99397e31b114cfc085d5"
}

[2025-05-22 12:09:14] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972592",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K06 - 2025-05-23",
    "vnp_PayDate": "20250522120936",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972592",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522120815174",
    "vnp_SecureHash": "4f27ddac3c7330162ca234ac3ea40b71c170eb5c35dcd8cea53f6812d6892716f9e80fe9d05c257cd54963425779d1c73da3568ec4bc372d4f2b7f940cb3d8e0"
  },
  "ip": "::1"
}

[2025-05-22 12:09:14] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972592",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K06 - 2025-05-23",
  "vnp_PayDate": "20250522120936",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972592",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522120815174",
  "vnp_SecureHash": "4f27ddac3c7330162ca234ac3ea40b71c170eb5c35dcd8cea53f6812d6892716f9e80fe9d05c257cd54963425779d1c73da3568ec4bc372d4f2b7f940cb3d8e0"
}

[2025-05-22 12:09:14] Xác minh trả về:
{
  "receivedHash": "4f27ddac3c7330162ca234ac3ea40b71c170eb5c35dcd8cea53f6812d6892716f9e80fe9d05c257cd54963425779d1c73da3568ec4bc372d4f2b7f940cb3d8e0",
  "calculatedHash": "4f27ddac3c7330162ca234ac3ea40b71c170eb5c35dcd8cea53f6812d6892716f9e80fe9d05c257cd54963425779d1c73da3568ec4bc372d4f2b7f940cb3d8e0",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972592&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K06+-+2025-05-23&vnp_PayDate=20250522120936&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972592&vnp_TransactionStatus=00&vnp_TxnRef=20250522120815174"
}

[2025-05-22 12:09:14] Thanh toán thành công
{
  "orderId": "20250522120815174",
  "amount": 180000
}

[2025-05-22 12:09:14] Lỗi cơ sở dữ liệu khi cập nhật trạng thái thanh toán:
Error: Unknown column 'paid_at' in 'field list'
    at PromisePool.query (D:\Parking\backend\danentang\backend\node_modules\mysql2\lib\promise\pool.js:36:22)
    at vnpayReturn (D:\Parking\backend\danentang\backend\controllers\paymentController.js:529:22)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[2025-05-22 12:09:14] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 12:09:14] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 12:18:13] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "174",
  "amount": 180000,
  "orderInfo": "Thanh toán đặt chỗ K06 - 2025-05-23",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 12:18:13] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "174"
}

[2025-05-22 12:18:13] Đã tạo bản ghi thanh toán:
{
  "paymentId": 264,
  "bookingId": "174",
  "amount": 180000
}

[2025-05-22 12:18:13] Phát hiện URL trả về từ ứng dụng di động:
parkingapp://payment-result

[2025-05-22 12:18:13] URL trả về được sử dụng cho VNPay:
https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 12:18:13] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522121813174",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K06 - 2025-05-23",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "18000000",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "192.168.0.100",
  "vnp_CreateDate": "20250522121813",
  "vnp_BankCode": "NCB"
}

[2025-05-22 12:18:13] Chuỗi dữ liệu signData VNPay:
vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522121813&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K06+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522121813174&vnp_Version=2.1.0

[2025-05-22 12:18:13] Chữ ký VNPay đã tạo:
473db89213ecfb5ffa08830ad4feb3c23364649ded2134cc11a7e2d90bfe671d461b9c57960811eb81b09e70fd84e1924700fd0b33404b5c06a57b3859f747f9

[2025-05-22 12:18:13] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522121813&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K06+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522121813174&vnp_Version=2.1.0&vnp_SecureHash=473db89213ecfb5ffa08830ad4feb3c23364649ded2134cc11a7e2d90bfe671d461b9c57960811eb81b09e70fd84e1924700fd0b33404b5c06a57b3859f747f9

[2025-05-22 12:18:13] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 264,
  "orderId": "20250522121813174",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 12:18:13] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522121813&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K06+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522121813174&vnp_Version=2.1.0&vnp_SecureHash=473db89213ecfb5ffa08830ad4feb3c23364649ded2134cc11a7e2d90bfe671d461b9c57960811eb81b09e70fd84e1924700fd0b33404b5c06a57b3859f747f9"
}

[2025-05-22 12:19:11] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972604",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K06 - 2025-05-23",
    "vnp_PayDate": "20250522121926",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972604",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522121813174",
    "vnp_SecureHash": "9a997ef9926f4b944ec5a2e1b46c4f0fe336bc7530c129cbc2e9e9b8f2e15ad17aa6bf5abee2485569995ea02281fcad086f5b3372b154258aa43b1a41338d03"
  },
  "ip": "::1"
}

[2025-05-22 12:19:11] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972604",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K06 - 2025-05-23",
  "vnp_PayDate": "20250522121926",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972604",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522121813174",
  "vnp_SecureHash": "9a997ef9926f4b944ec5a2e1b46c4f0fe336bc7530c129cbc2e9e9b8f2e15ad17aa6bf5abee2485569995ea02281fcad086f5b3372b154258aa43b1a41338d03"
}

[2025-05-22 12:19:11] Xác minh trả về:
{
  "receivedHash": "9a997ef9926f4b944ec5a2e1b46c4f0fe336bc7530c129cbc2e9e9b8f2e15ad17aa6bf5abee2485569995ea02281fcad086f5b3372b154258aa43b1a41338d03",
  "calculatedHash": "9a997ef9926f4b944ec5a2e1b46c4f0fe336bc7530c129cbc2e9e9b8f2e15ad17aa6bf5abee2485569995ea02281fcad086f5b3372b154258aa43b1a41338d03",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972604&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K06+-+2025-05-23&vnp_PayDate=20250522121926&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972604&vnp_TransactionStatus=00&vnp_TxnRef=20250522121813174"
}

[2025-05-22 12:19:11] Thanh toán thành công
{
  "orderId": "20250522121813174",
  "amount": 180000
}

[2025-05-22 12:19:11] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 264,
  "bookingId": 174
}

[2025-05-22 12:19:11] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 12:19:11] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 12:40:19] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "123",
  "amount": 10000,
  "orderInfo": "Thanh toan dat cho"
}

[2025-05-22 12:40:19] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "123"
}

[2025-05-22 12:40:19] Đã tạo bản ghi thanh toán:
{
  "paymentId": 265,
  "bookingId": "123",
  "amount": 10000
}

[2025-05-22 12:40:19] URL trả về được sử dụng cho VNPay:
https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 12:40:19] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522124019123",
  "vnp_OrderInfo": "Thanh toan dat cho",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "1000000",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "::1",
  "vnp_CreateDate": "20250522124019",
  "vnp_BankCode": "NCB"
}

[2025-05-22 12:40:19] Chuỗi dữ liệu signData VNPay:
vnp_Amount=1000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522124019&vnp_CurrCode=VND&vnp_IpAddr=::1&vnp_Locale=vn&vnp_OrderInfo=Thanh+toan+dat+cho&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522124019123&vnp_Version=2.1.0

[2025-05-22 12:40:19] Chữ ký VNPay đã tạo:
9285a8198b3aa4f0cfd22ac55b6f788955b402858e11d3c9966f316b5fa7bde75c51186dc89db4133f32d2559df71398305d2be8eb18679e27ab85b8da0dc3a2

[2025-05-22 12:40:19] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=1000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522124019&vnp_CurrCode=VND&vnp_IpAddr=::1&vnp_Locale=vn&vnp_OrderInfo=Thanh+toan+dat+cho&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522124019123&vnp_Version=2.1.0&vnp_SecureHash=9285a8198b3aa4f0cfd22ac55b6f788955b402858e11d3c9966f316b5fa7bde75c51186dc89db4133f32d2559df71398305d2be8eb18679e27ab85b8da0dc3a2

[2025-05-22 12:40:19] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 265,
  "orderId": "20250522124019123",
  "returnUrl": ""
}

[2025-05-22 12:40:19] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=1000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522124019&vnp_CurrCode=VND&vnp_IpAddr=::1&vnp_Locale=vn&vnp_OrderInfo=Thanh+toan+dat+cho&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522124019123&vnp_Version=2.1.0&vnp_SecureHash=9285a8198b3aa4f0cfd22ac55b6f788955b402858e11d3c9966f316b5fa7bde75c51186dc89db4133f32d2559df71398305d2be8eb18679e27ab85b8da0dc3a2"
}

[2025-05-22 12:46:54] === NHẬN THÔNG BÁO IPN TỪ VNPAY ===
{
  "query": {},
  "headers": {
    "user-agent": "PostmanRuntime/7.44.0",
    "accept": "*/*",
    "postman-token": "ed68b6fb-8fad-452c-991e-b23726f03319",
    "host": "localhost:3000",
    "accept-encoding": "gzip, deflate, br",
    "connection": "keep-alive"
  },
  "ip": "::1"
}

[2025-05-22 12:46:54] Thiếu tham số SecureHash trong IPN params

[2025-05-22 12:48:59] === NHẬN THÔNG BÁO IPN TỪ VNPAY ===
{
  "query": {},
  "headers": {
    "user-agent": "PostmanRuntime/7.44.0",
    "accept": "*/*",
    "postman-token": "9e940c47-eb06-47f4-83fe-e02fca0adef7",
    "host": "localhost:3000",
    "accept-encoding": "gzip, deflate, br",
    "connection": "keep-alive"
  },
  "ip": "::1"
}

[2025-05-22 12:48:59] Thiếu tham số SecureHash trong IPN params

[2025-05-22 12:50:24] === NHẬN THÔNG BÁO IPN TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_ResponseCode": "00",
    "vnp_TxnRef": "20250522121813174",
    "vnp_SecureHash": "yourTestHash"
  },
  "headers": {
    "user-agent": "PostmanRuntime/7.44.0",
    "accept": "*/*",
    "postman-token": "9e00bb5b-76a2-4cac-9c56-743d340b1338",
    "host": "localhost:3000",
    "accept-encoding": "gzip, deflate, br",
    "connection": "keep-alive"
  },
  "ip": "::1"
}

[2025-05-22 12:50:24] Tham số IPN:
{
  "vnp_Amount": "18000000",
  "vnp_ResponseCode": "00",
  "vnp_TxnRef": "20250522121813174",
  "vnp_SecureHash": "yourTestHash"
}

[2025-05-22 12:50:24] Xác minh IPN:
{
  "receivedHash": "yourTestHash",
  "calculatedHash": "5164d976b31f3a978386d4f0aebb8752604ef7a59005686f842bca584c03c742845b1c4b49cf289f32e59b5dd69555e21ff61489f02a37f868beb234946f58af",
  "queryString": "vnp_Amount=18000000&vnp_ResponseCode=00&vnp_TxnRef=20250522121813174"
}

[2025-05-22 12:50:24] Xác minh chữ ký IPN thất bại!
{
  "received": "yourTestHash",
  "expected": "5164d976b31f3a978386d4f0aebb8752604ef7a59005686f842bca584c03c742845b1c4b49cf289f32e59b5dd69555e21ff61489f02a37f868beb234946f58af",
  "params": {
    "vnp_Amount": "18000000",
    "vnp_ResponseCode": "00",
    "vnp_TxnRef": "20250522121813174"
  }
}

[2025-05-22 12:52:49] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "175",
  "amount": 180000,
  "orderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 12:52:49] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "175"
}

[2025-05-22 12:52:49] Đã tạo bản ghi thanh toán:
{
  "paymentId": 267,
  "bookingId": "175",
  "amount": 180000
}

[2025-05-22 12:52:49] Phát hiện URL trả về từ ứng dụng di động:
parkingapp://payment-result

[2025-05-22 12:52:49] URL trả về được sử dụng cho VNPay:
https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 12:52:49] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522125249175",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "18000000",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "192.168.0.100",
  "vnp_CreateDate": "20250522125249",
  "vnp_BankCode": "NCB"
}

[2025-05-22 12:52:49] Chuỗi dữ liệu signData VNPay:
vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522125249&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522125249175&vnp_Version=2.1.0

[2025-05-22 12:52:49] Chữ ký VNPay đã tạo:
ccbbf209137c2d91c0bf33a7e7bba1192601de5efcee9f5629344ba3befdf0d29f246b53b23fe26532864446248167ff7ec2e7e3a55fac0086f6dca2a3c934dd

[2025-05-22 12:52:49] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522125249&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522125249175&vnp_Version=2.1.0&vnp_SecureHash=ccbbf209137c2d91c0bf33a7e7bba1192601de5efcee9f5629344ba3befdf0d29f246b53b23fe26532864446248167ff7ec2e7e3a55fac0086f6dca2a3c934dd

[2025-05-22 12:52:49] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 267,
  "orderId": "20250522125249175",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 12:52:49] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522125249&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522125249175&vnp_Version=2.1.0&vnp_SecureHash=ccbbf209137c2d91c0bf33a7e7bba1192601de5efcee9f5629344ba3befdf0d29f246b53b23fe26532864446248167ff7ec2e7e3a55fac0086f6dca2a3c934dd"
}

[2025-05-22 12:54:26] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 12:54:49] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "175",
  "amount": 180000,
  "orderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 12:54:49] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "175"
}

[2025-05-22 12:54:49] Đã tạo bản ghi thanh toán:
{
  "paymentId": 268,
  "bookingId": "175",
  "amount": 180000
}

[2025-05-22 12:54:49] Phát hiện URL trả về từ ứng dụng di động:
parkingapp://payment-result

[2025-05-22 12:54:49] URL trả về được sử dụng cho VNPay:
https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 12:54:49] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522125449175",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "18000000",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "192.168.0.100",
  "vnp_CreateDate": "20250522125449",
  "vnp_BankCode": "NCB"
}

[2025-05-22 12:54:49] Chuỗi dữ liệu signData VNPay:
vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522125449&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522125449175&vnp_Version=2.1.0

[2025-05-22 12:54:49] Chữ ký VNPay đã tạo:
96c9159d7045b583e46c9841a0a6b9881db95304de7939a1fa192d1b9d230a4d0deba917c2a19fe251c49f0c05bd50d9eebbc1a3d98c5d4e91ae334c8766ddd6

[2025-05-22 12:54:49] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522125449&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522125449175&vnp_Version=2.1.0&vnp_SecureHash=96c9159d7045b583e46c9841a0a6b9881db95304de7939a1fa192d1b9d230a4d0deba917c2a19fe251c49f0c05bd50d9eebbc1a3d98c5d4e91ae334c8766ddd6

[2025-05-22 12:54:49] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 268,
  "orderId": "20250522125449175",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 12:54:49] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522125449&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522125449175&vnp_Version=2.1.0&vnp_SecureHash=96c9159d7045b583e46c9841a0a6b9881db95304de7939a1fa192d1b9d230a4d0deba917c2a19fe251c49f0c05bd50d9eebbc1a3d98c5d4e91ae334c8766ddd6"
}

[2025-05-22 12:55:33] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972654",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522125551",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972654",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522125449175",
    "vnp_SecureHash": "fd362ce12bbb13f5948fde4da7b80760803dd3cd81e13bb900616c7e5b9424e062d1f7c7f69970f6b158b2a0c9f3c076305cb3703468393b3e3b8fefb5b5331f"
  },
  "ip": "::1"
}

[2025-05-22 12:55:33] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972654",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522125551",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972654",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522125449175",
  "vnp_SecureHash": "fd362ce12bbb13f5948fde4da7b80760803dd3cd81e13bb900616c7e5b9424e062d1f7c7f69970f6b158b2a0c9f3c076305cb3703468393b3e3b8fefb5b5331f"
}

[2025-05-22 12:55:33] Xác minh trả về:
{
  "receivedHash": "fd362ce12bbb13f5948fde4da7b80760803dd3cd81e13bb900616c7e5b9424e062d1f7c7f69970f6b158b2a0c9f3c076305cb3703468393b3e3b8fefb5b5331f",
  "calculatedHash": "fd362ce12bbb13f5948fde4da7b80760803dd3cd81e13bb900616c7e5b9424e062d1f7c7f69970f6b158b2a0c9f3c076305cb3703468393b3e3b8fefb5b5331f",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972654&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522125551&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972654&vnp_TransactionStatus=00&vnp_TxnRef=20250522125449175"
}

[2025-05-22 12:55:33] Thanh toán thành công
{
  "orderId": "20250522125449175",
  "amount": 180000
}

[2025-05-22 12:55:33] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 268,
  "bookingId": 175
}

[2025-05-22 12:55:33] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 12:55:33] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 12:59:15] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "175",
  "amount": 180000,
  "orderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 12:59:15] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "175"
}

[2025-05-22 12:59:15] Đã tạo bản ghi thanh toán:
{
  "paymentId": 269,
  "bookingId": "175",
  "amount": 180000
}

[2025-05-22 12:59:15] Phát hiện URL trả về từ ứng dụng di động:
parkingapp://payment-result

[2025-05-22 12:59:15] URL trả về được sử dụng cho VNPay:
https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 12:59:15] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522125915175",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "18000000",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "192.168.0.100",
  "vnp_CreateDate": "20250522125915",
  "vnp_BankCode": "NCB"
}

[2025-05-22 12:59:15] Chuỗi dữ liệu signData VNPay:
vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522125915&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522125915175&vnp_Version=2.1.0

[2025-05-22 12:59:15] Chữ ký VNPay đã tạo:
2fad58ec76b5f404a6ef6d4d9d568e0016a1bba4d3bda2d06684831a02785d7d2ab646d9b77856fe03def44ecf0105af162a464e5accc0f6fa121299346f41c1

[2025-05-22 12:59:15] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522125915&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522125915175&vnp_Version=2.1.0&vnp_SecureHash=2fad58ec76b5f404a6ef6d4d9d568e0016a1bba4d3bda2d06684831a02785d7d2ab646d9b77856fe03def44ecf0105af162a464e5accc0f6fa121299346f41c1

[2025-05-22 12:59:15] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 269,
  "orderId": "20250522125915175",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 12:59:15] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522125915&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522125915175&vnp_Version=2.1.0&vnp_SecureHash=2fad58ec76b5f404a6ef6d4d9d568e0016a1bba4d3bda2d06684831a02785d7d2ab646d9b77856fe03def44ecf0105af162a464e5accc0f6fa121299346f41c1"
}

[2025-05-22 12:59:46] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972662",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130007",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972662",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522125915175",
    "vnp_SecureHash": "c268bd1cb3807026470203cd8f65233752aebaf4b2602147f3d7fb2753b7f84657def1b1e90ac360eafe2d6fdc1aa58553a01068f4be588533c79712b5e8090a"
  },
  "ip": "::1"
}

[2025-05-22 12:59:46] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972662",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130007",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972662",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522125915175",
  "vnp_SecureHash": "c268bd1cb3807026470203cd8f65233752aebaf4b2602147f3d7fb2753b7f84657def1b1e90ac360eafe2d6fdc1aa58553a01068f4be588533c79712b5e8090a"
}

[2025-05-22 12:59:46] Xác minh trả về:
{
  "receivedHash": "c268bd1cb3807026470203cd8f65233752aebaf4b2602147f3d7fb2753b7f84657def1b1e90ac360eafe2d6fdc1aa58553a01068f4be588533c79712b5e8090a",
  "calculatedHash": "c268bd1cb3807026470203cd8f65233752aebaf4b2602147f3d7fb2753b7f84657def1b1e90ac360eafe2d6fdc1aa58553a01068f4be588533c79712b5e8090a",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972662&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130007&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972662&vnp_TransactionStatus=00&vnp_TxnRef=20250522125915175"
}

[2025-05-22 12:59:46] Thanh toán thành công
{
  "orderId": "20250522125915175",
  "amount": 180000
}

[2025-05-22 12:59:46] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 269,
  "bookingId": 175
}

[2025-05-22 12:59:46] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 12:59:46] Chuyển hướng đến:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:03:20] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "175",
  "amount": 180000,
  "orderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 13:03:20] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "175"
}

[2025-05-22 13:03:20] Đã tạo bản ghi thanh toán:
{
  "paymentId": 270,
  "bookingId": "175",
  "amount": 180000
}

[2025-05-22 13:03:20] Phát hiện URL trả về từ ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:03:20] URL trả về được sử dụng cho VNPay:
https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 13:03:20] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522130320175",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "18000000",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "192.168.0.100",
  "vnp_CreateDate": "20250522130320",
  "vnp_BankCode": "NCB"
}

[2025-05-22 13:03:20] Chuỗi dữ liệu signData VNPay:
vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522130320&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522130320175&vnp_Version=2.1.0

[2025-05-22 13:03:20] Chữ ký VNPay đã tạo:
c192aa7efa0931800b43ade2a1aef07a1f0234f564aba8d664480b7e6514d6f3e94ab2ba4cdad6cc580447d826e5c66e304d5014196b159d91ecbad7882a9e6d

[2025-05-22 13:03:20] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522130320&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522130320175&vnp_Version=2.1.0&vnp_SecureHash=c192aa7efa0931800b43ade2a1aef07a1f0234f564aba8d664480b7e6514d6f3e94ab2ba4cdad6cc580447d826e5c66e304d5014196b159d91ecbad7882a9e6d

[2025-05-22 13:03:20] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 270,
  "orderId": "20250522130320175",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 13:03:20] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522130320&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522130320175&vnp_Version=2.1.0&vnp_SecureHash=c192aa7efa0931800b43ade2a1aef07a1f0234f564aba8d664480b7e6514d6f3e94ab2ba4cdad6cc580447d826e5c66e304d5014196b159d91ecbad7882a9e6d"
}

[2025-05-22 13:04:35] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 13:06:02] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 13:06:04] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 13:07:34] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972671",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130752",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972671",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130320175",
    "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
  },
  "ip": "::1"
}

[2025-05-22 13:07:34] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972671",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130752",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972671",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130320175",
  "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
}

[2025-05-22 13:07:34] Xác minh trả về:
{
  "receivedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "calculatedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972671&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130752&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972671&vnp_TransactionStatus=00&vnp_TxnRef=20250522130320175"
}

[2025-05-22 13:07:34] Thanh toán thành công
{
  "orderId": "20250522130320175",
  "amount": 180000
}

[2025-05-22 13:07:34] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 270,
  "bookingId": 175
}

[2025-05-22 13:07:34] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:07:34] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:07:37] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972671",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130752",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972671",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130320175",
    "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
  },
  "ip": "::1"
}

[2025-05-22 13:07:37] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972671",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130752",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972671",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130320175",
  "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
}

[2025-05-22 13:07:37] Xác minh trả về:
{
  "receivedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "calculatedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972671&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130752&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972671&vnp_TransactionStatus=00&vnp_TxnRef=20250522130320175"
}

[2025-05-22 13:07:37] Thanh toán thành công
{
  "orderId": "20250522130320175",
  "amount": 180000
}

[2025-05-22 13:07:37] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 270,
  "bookingId": 175
}

[2025-05-22 13:07:37] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:07:37] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:07:38] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972671",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130752",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972671",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130320175",
    "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
  },
  "ip": "::1"
}

[2025-05-22 13:07:38] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972671",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130752",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972671",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130320175",
  "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
}

[2025-05-22 13:07:38] Xác minh trả về:
{
  "receivedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "calculatedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972671&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130752&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972671&vnp_TransactionStatus=00&vnp_TxnRef=20250522130320175"
}

[2025-05-22 13:07:38] Thanh toán thành công
{
  "orderId": "20250522130320175",
  "amount": 180000
}

[2025-05-22 13:07:38] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 270,
  "bookingId": 175
}

[2025-05-22 13:07:38] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:07:38] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:07:38] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972671",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130752",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972671",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130320175",
    "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
  },
  "ip": "::1"
}

[2025-05-22 13:07:38] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972671",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130752",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972671",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130320175",
  "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
}

[2025-05-22 13:07:38] Xác minh trả về:
{
  "receivedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "calculatedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972671&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130752&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972671&vnp_TransactionStatus=00&vnp_TxnRef=20250522130320175"
}

[2025-05-22 13:07:38] Thanh toán thành công
{
  "orderId": "20250522130320175",
  "amount": 180000
}

[2025-05-22 13:07:38] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 270,
  "bookingId": 175
}

[2025-05-22 13:07:38] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:07:38] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:07:39] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972671",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130752",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972671",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130320175",
    "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
  },
  "ip": "::1"
}

[2025-05-22 13:07:39] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972671",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130752",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972671",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130320175",
  "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
}

[2025-05-22 13:07:39] Xác minh trả về:
{
  "receivedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "calculatedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972671&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130752&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972671&vnp_TransactionStatus=00&vnp_TxnRef=20250522130320175"
}

[2025-05-22 13:07:39] Thanh toán thành công
{
  "orderId": "20250522130320175",
  "amount": 180000
}

[2025-05-22 13:07:39] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 270,
  "bookingId": 175
}

[2025-05-22 13:07:39] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:07:39] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:07:40] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972671",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130752",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972671",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130320175",
    "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
  },
  "ip": "::1"
}

[2025-05-22 13:07:40] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972671",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130752",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972671",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130320175",
  "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
}

[2025-05-22 13:07:40] Xác minh trả về:
{
  "receivedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "calculatedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972671&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130752&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972671&vnp_TransactionStatus=00&vnp_TxnRef=20250522130320175"
}

[2025-05-22 13:07:40] Thanh toán thành công
{
  "orderId": "20250522130320175",
  "amount": 180000
}

[2025-05-22 13:07:40] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 270,
  "bookingId": 175
}

[2025-05-22 13:07:40] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:07:40] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:07:41] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972671",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130752",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972671",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130320175",
    "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
  },
  "ip": "::1"
}

[2025-05-22 13:07:41] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972671",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130752",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972671",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130320175",
  "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
}

[2025-05-22 13:07:41] Xác minh trả về:
{
  "receivedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "calculatedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972671&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130752&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972671&vnp_TransactionStatus=00&vnp_TxnRef=20250522130320175"
}

[2025-05-22 13:07:41] Thanh toán thành công
{
  "orderId": "20250522130320175",
  "amount": 180000
}

[2025-05-22 13:07:41] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 270,
  "bookingId": 175
}

[2025-05-22 13:07:41] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:07:41] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:07:41] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972671",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130752",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972671",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130320175",
    "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
  },
  "ip": "::1"
}

[2025-05-22 13:07:41] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972671",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130752",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972671",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130320175",
  "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
}

[2025-05-22 13:07:41] Xác minh trả về:
{
  "receivedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "calculatedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972671&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130752&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972671&vnp_TransactionStatus=00&vnp_TxnRef=20250522130320175"
}

[2025-05-22 13:07:41] Thanh toán thành công
{
  "orderId": "20250522130320175",
  "amount": 180000
}

[2025-05-22 13:07:41] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 270,
  "bookingId": 175
}

[2025-05-22 13:07:41] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:07:41] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:07:42] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972671",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130752",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972671",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130320175",
    "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
  },
  "ip": "::1"
}

[2025-05-22 13:07:42] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972671",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130752",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972671",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130320175",
  "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
}

[2025-05-22 13:07:42] Xác minh trả về:
{
  "receivedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "calculatedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972671&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130752&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972671&vnp_TransactionStatus=00&vnp_TxnRef=20250522130320175"
}

[2025-05-22 13:07:42] Thanh toán thành công
{
  "orderId": "20250522130320175",
  "amount": 180000
}

[2025-05-22 13:07:42] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 270,
  "bookingId": 175
}

[2025-05-22 13:07:42] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:07:42] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:07:42] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972671",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130752",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972671",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130320175",
    "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
  },
  "ip": "::1"
}

[2025-05-22 13:07:42] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972671",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130752",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972671",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130320175",
  "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
}

[2025-05-22 13:07:42] Xác minh trả về:
{
  "receivedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "calculatedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972671&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130752&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972671&vnp_TransactionStatus=00&vnp_TxnRef=20250522130320175"
}

[2025-05-22 13:07:42] Thanh toán thành công
{
  "orderId": "20250522130320175",
  "amount": 180000
}

[2025-05-22 13:07:42] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 270,
  "bookingId": 175
}

[2025-05-22 13:07:42] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:07:42] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:07:42] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972671",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130752",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972671",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130320175",
    "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
  },
  "ip": "::1"
}

[2025-05-22 13:07:42] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972671",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130752",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972671",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130320175",
  "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
}

[2025-05-22 13:07:42] Xác minh trả về:
{
  "receivedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "calculatedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972671&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130752&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972671&vnp_TransactionStatus=00&vnp_TxnRef=20250522130320175"
}

[2025-05-22 13:07:42] Thanh toán thành công
{
  "orderId": "20250522130320175",
  "amount": 180000
}

[2025-05-22 13:07:42] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 270,
  "bookingId": 175
}

[2025-05-22 13:07:42] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:07:42] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:07:46] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972671",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130752",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972671",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130320175",
    "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
  },
  "ip": "::1"
}

[2025-05-22 13:07:46] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972671",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130752",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972671",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130320175",
  "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
}

[2025-05-22 13:07:46] Xác minh trả về:
{
  "receivedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "calculatedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972671&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130752&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972671&vnp_TransactionStatus=00&vnp_TxnRef=20250522130320175"
}

[2025-05-22 13:07:46] Thanh toán thành công
{
  "orderId": "20250522130320175",
  "amount": 180000
}

[2025-05-22 13:07:46] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 270,
  "bookingId": 175
}

[2025-05-22 13:07:46] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:07:46] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:07:55] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972671",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130752",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972671",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130320175",
    "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
  },
  "ip": "::1"
}

[2025-05-22 13:07:55] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972671",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130752",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972671",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130320175",
  "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
}

[2025-05-22 13:07:55] Xác minh trả về:
{
  "receivedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "calculatedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972671&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130752&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972671&vnp_TransactionStatus=00&vnp_TxnRef=20250522130320175"
}

[2025-05-22 13:07:55] Thanh toán thành công
{
  "orderId": "20250522130320175",
  "amount": 180000
}

[2025-05-22 13:07:55] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 270,
  "bookingId": 175
}

[2025-05-22 13:07:55] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:07:55] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:07:55] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972671",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130752",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972671",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130320175",
    "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
  },
  "ip": "::1"
}

[2025-05-22 13:07:55] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972671",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130752",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972671",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130320175",
  "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
}

[2025-05-22 13:07:55] Xác minh trả về:
{
  "receivedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "calculatedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972671&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130752&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972671&vnp_TransactionStatus=00&vnp_TxnRef=20250522130320175"
}

[2025-05-22 13:07:55] Thanh toán thành công
{
  "orderId": "20250522130320175",
  "amount": 180000
}

[2025-05-22 13:07:55] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 270,
  "bookingId": 175
}

[2025-05-22 13:07:55] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:07:55] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:07:56] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972671",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130752",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972671",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130320175",
    "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
  },
  "ip": "::1"
}

[2025-05-22 13:07:56] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972671",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130752",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972671",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130320175",
  "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
}

[2025-05-22 13:07:56] Xác minh trả về:
{
  "receivedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "calculatedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972671&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130752&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972671&vnp_TransactionStatus=00&vnp_TxnRef=20250522130320175"
}

[2025-05-22 13:07:56] Thanh toán thành công
{
  "orderId": "20250522130320175",
  "amount": 180000
}

[2025-05-22 13:07:56] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 270,
  "bookingId": 175
}

[2025-05-22 13:07:56] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:07:56] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:07:57] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972671",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130752",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972671",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130320175",
    "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
  },
  "ip": "::1"
}

[2025-05-22 13:07:57] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972671",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130752",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972671",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130320175",
  "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
}

[2025-05-22 13:07:57] Xác minh trả về:
{
  "receivedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "calculatedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972671&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130752&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972671&vnp_TransactionStatus=00&vnp_TxnRef=20250522130320175"
}

[2025-05-22 13:07:57] Thanh toán thành công
{
  "orderId": "20250522130320175",
  "amount": 180000
}

[2025-05-22 13:07:57] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 270,
  "bookingId": 175
}

[2025-05-22 13:07:57] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:07:57] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:07:58] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972671",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130752",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972671",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130320175",
    "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
  },
  "ip": "::1"
}

[2025-05-22 13:07:58] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972671",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130752",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972671",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130320175",
  "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
}

[2025-05-22 13:07:58] Xác minh trả về:
{
  "receivedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "calculatedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972671&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130752&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972671&vnp_TransactionStatus=00&vnp_TxnRef=20250522130320175"
}

[2025-05-22 13:07:58] Thanh toán thành công
{
  "orderId": "20250522130320175",
  "amount": 180000
}

[2025-05-22 13:07:58] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 270,
  "bookingId": 175
}

[2025-05-22 13:07:58] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:07:58] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:08:00] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972671",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130752",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972671",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130320175",
    "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
  },
  "ip": "::1"
}

[2025-05-22 13:08:00] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972671",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130752",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972671",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130320175",
  "vnp_SecureHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3"
}

[2025-05-22 13:08:00] Xác minh trả về:
{
  "receivedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "calculatedHash": "6b5841525e78ef421ab60d6b00789cb4d4c1777c3573ab4543a4fd5d9b4e7f52176d06f0aa60896aa774c9440200b8ab6669a2fae338fa7dcad15443bd9bb6d3",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972671&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130752&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972671&vnp_TransactionStatus=00&vnp_TxnRef=20250522130320175"
}

[2025-05-22 13:08:00] Thanh toán thành công
{
  "orderId": "20250522130320175",
  "amount": 180000
}

[2025-05-22 13:08:00] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 270,
  "bookingId": 175
}

[2025-05-22 13:08:00] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:08:00] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:08:40] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "175",
  "amount": 180000,
  "orderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 13:08:40] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "175"
}

[2025-05-22 13:08:40] Đã tạo bản ghi thanh toán:
{
  "paymentId": 271,
  "bookingId": "175",
  "amount": 180000
}

[2025-05-22 13:08:40] Phát hiện URL trả về từ ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:08:40] URL trả về được sử dụng cho VNPay:
https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 13:08:40] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522130840175",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "18000000",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "192.168.0.100",
  "vnp_CreateDate": "20250522130840",
  "vnp_BankCode": "NCB"
}

[2025-05-22 13:08:40] Chuỗi dữ liệu signData VNPay:
vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522130840&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522130840175&vnp_Version=2.1.0

[2025-05-22 13:08:40] Chữ ký VNPay đã tạo:
4f53fee8fe91f28755626783d58fc94f4150aa2381d9ee8edc1c70cd224ee084a779d11b41394bca5da4b75e933c8a0559a3c47569222a97c8d3fa703a057706

[2025-05-22 13:08:40] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522130840&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522130840175&vnp_Version=2.1.0&vnp_SecureHash=4f53fee8fe91f28755626783d58fc94f4150aa2381d9ee8edc1c70cd224ee084a779d11b41394bca5da4b75e933c8a0559a3c47569222a97c8d3fa703a057706

[2025-05-22 13:08:40] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 271,
  "orderId": "20250522130840175",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 13:08:40] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522130840&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522130840175&vnp_Version=2.1.0&vnp_SecureHash=4f53fee8fe91f28755626783d58fc94f4150aa2381d9ee8edc1c70cd224ee084a779d11b41394bca5da4b75e933c8a0559a3c47569222a97c8d3fa703a057706"
}

[2025-05-22 13:09:17] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972677",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522130940",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972677",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522130840175",
    "vnp_SecureHash": "167b80f83cc1353b3f0ff1b88a9229f0ca9a0f0b862e103e99bf9314297b348c9ad2d2872931e4286f37da00c8e571cbabfc896ca112533c7b16ea9ffcade480"
  },
  "ip": "::1"
}

[2025-05-22 13:09:17] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972677",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522130940",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972677",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522130840175",
  "vnp_SecureHash": "167b80f83cc1353b3f0ff1b88a9229f0ca9a0f0b862e103e99bf9314297b348c9ad2d2872931e4286f37da00c8e571cbabfc896ca112533c7b16ea9ffcade480"
}

[2025-05-22 13:09:17] Xác minh trả về:
{
  "receivedHash": "167b80f83cc1353b3f0ff1b88a9229f0ca9a0f0b862e103e99bf9314297b348c9ad2d2872931e4286f37da00c8e571cbabfc896ca112533c7b16ea9ffcade480",
  "calculatedHash": "167b80f83cc1353b3f0ff1b88a9229f0ca9a0f0b862e103e99bf9314297b348c9ad2d2872931e4286f37da00c8e571cbabfc896ca112533c7b16ea9ffcade480",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972677&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522130940&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972677&vnp_TransactionStatus=00&vnp_TxnRef=20250522130840175"
}

[2025-05-22 13:09:17] Thanh toán thành công
{
  "orderId": "20250522130840175",
  "amount": 180000
}

[2025-05-22 13:09:17] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 271,
  "bookingId": 175
}

[2025-05-22 13:09:17] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:09:17] Chuyển hướng đến trang web:
https://eca6-113-22-46-72.ngrok-free.app/payment/result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:10:41] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 13:12:26] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 13:12:29] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 13:13:03] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 13:14:04] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "175",
  "amount": 180000,
  "orderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 13:14:04] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "175"
}

[2025-05-22 13:14:04] Đã tạo bản ghi thanh toán:
{
  "paymentId": 272,
  "bookingId": "175",
  "amount": 180000
}

[2025-05-22 13:14:04] Phát hiện URL trả về từ ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:14:04] URL trả về được sử dụng cho VNPay:
https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 13:14:04] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522131404175",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "18000000",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "192.168.0.100",
  "vnp_CreateDate": "20250522131404",
  "vnp_BankCode": "NCB"
}

[2025-05-22 13:14:04] Chuỗi dữ liệu signData VNPay:
vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522131404&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522131404175&vnp_Version=2.1.0

[2025-05-22 13:14:04] Chữ ký VNPay đã tạo:
f73662742b807336786b8051429083ece8ddfb91f74c9e9186915200a43d2edb64d5b05a40e8520bf4d30b26626f5f4612f31f931abffc60eb06709aa7618a08

[2025-05-22 13:14:04] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522131404&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522131404175&vnp_Version=2.1.0&vnp_SecureHash=f73662742b807336786b8051429083ece8ddfb91f74c9e9186915200a43d2edb64d5b05a40e8520bf4d30b26626f5f4612f31f931abffc60eb06709aa7618a08

[2025-05-22 13:14:04] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 272,
  "orderId": "20250522131404175",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 13:14:04] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522131404&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522131404175&vnp_Version=2.1.0&vnp_SecureHash=f73662742b807336786b8051429083ece8ddfb91f74c9e9186915200a43d2edb64d5b05a40e8520bf4d30b26626f5f4612f31f931abffc60eb06709aa7618a08"
}

[2025-05-22 13:14:14] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "175",
  "amount": 180000,
  "orderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 13:14:14] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "175"
}

[2025-05-22 13:14:14] Đã tạo bản ghi thanh toán:
{
  "paymentId": 273,
  "bookingId": "175",
  "amount": 180000
}

[2025-05-22 13:14:14] Phát hiện URL trả về từ ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:14:14] URL trả về được sử dụng cho VNPay:
https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 13:14:14] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522131414175",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "18000000",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "192.168.0.100",
  "vnp_CreateDate": "20250522131414",
  "vnp_BankCode": "NCB"
}

[2025-05-22 13:14:14] Chuỗi dữ liệu signData VNPay:
vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522131414&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522131414175&vnp_Version=2.1.0

[2025-05-22 13:14:14] Chữ ký VNPay đã tạo:
ce7dc176836b8e3da3d8b9553c5491e38f1f36146fdca423ee15e88bff1ffe28da8d2811cfd5f9db32a9bf94ab1ba02f9bbd6abc576f0edc0c0986e6a56f60c4

[2025-05-22 13:14:14] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522131414&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522131414175&vnp_Version=2.1.0&vnp_SecureHash=ce7dc176836b8e3da3d8b9553c5491e38f1f36146fdca423ee15e88bff1ffe28da8d2811cfd5f9db32a9bf94ab1ba02f9bbd6abc576f0edc0c0986e6a56f60c4

[2025-05-22 13:14:14] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 273,
  "orderId": "20250522131414175",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 13:14:14] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=18000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522131414&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522131414175&vnp_Version=2.1.0&vnp_SecureHash=ce7dc176836b8e3da3d8b9553c5491e38f1f36146fdca423ee15e88bff1ffe28da8d2811cfd5f9db32a9bf94ab1ba02f9bbd6abc576f0edc0c0986e6a56f60c4"
}

[2025-05-22 13:14:47] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "18000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972685",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
    "vnp_PayDate": "20250522131508",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972685",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522131414175",
    "vnp_SecureHash": "fe24f3c22a76c48e9955542ba1e03b487ce63377cf1f4a37772218ee90777145c1c7a05cceb440420e484def8bf50fdf1cbd1a7ba149d048972f7faa6d144d37"
  },
  "ip": "::1"
}

[2025-05-22 13:14:47] Tham số trả về:
{
  "vnp_Amount": "18000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972685",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K11 - 2025-05-23",
  "vnp_PayDate": "20250522131508",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972685",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522131414175",
  "vnp_SecureHash": "fe24f3c22a76c48e9955542ba1e03b487ce63377cf1f4a37772218ee90777145c1c7a05cceb440420e484def8bf50fdf1cbd1a7ba149d048972f7faa6d144d37"
}

[2025-05-22 13:14:47] Xác minh trả về:
{
  "receivedHash": "fe24f3c22a76c48e9955542ba1e03b487ce63377cf1f4a37772218ee90777145c1c7a05cceb440420e484def8bf50fdf1cbd1a7ba149d048972f7faa6d144d37",
  "calculatedHash": "fe24f3c22a76c48e9955542ba1e03b487ce63377cf1f4a37772218ee90777145c1c7a05cceb440420e484def8bf50fdf1cbd1a7ba149d048972f7faa6d144d37",
  "queryString": "vnp_Amount=18000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972685&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K11+-+2025-05-23&vnp_PayDate=20250522131508&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972685&vnp_TransactionStatus=00&vnp_TxnRef=20250522131414175"
}

[2025-05-22 13:14:47] Thanh toán thành công
{
  "orderId": "20250522131414175",
  "amount": 180000
}

[2025-05-22 13:14:47] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 273,
  "bookingId": 175
}

[2025-05-22 13:14:47] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:14:47] Chuyển hướng đến trang web:
https://eca6-113-22-46-72.ngrok-free.app/api/payment/result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=180000

[2025-05-22 13:16:54] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "176",
  "amount": 4800000,
  "orderInfo": "Thanh toán đặt chỗ K14 - 2025-05-22",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 13:16:54] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "176"
}

[2025-05-22 13:16:54] Đã tạo bản ghi thanh toán:
{
  "paymentId": 275,
  "bookingId": "176",
  "amount": 4800000
}

[2025-05-22 13:16:54] Phát hiện URL trả về từ ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:16:54] URL trả về được sử dụng cho VNPay:
https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 13:16:54] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522131654176",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K14 - 2025-05-22",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "480000000",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "192.168.0.100",
  "vnp_CreateDate": "20250522131654",
  "vnp_BankCode": "NCB"
}

[2025-05-22 13:16:54] Chuỗi dữ liệu signData VNPay:
vnp_Amount=480000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522131654&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K14+-+2025-05-22&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522131654176&vnp_Version=2.1.0

[2025-05-22 13:16:54] Chữ ký VNPay đã tạo:
3ea92155febaa21c41d7437a8e882d3c08db38605fffcef892d0390a0023d0e886e4c7bd48aaea685ca3a239a01d6c98625ec43a377993193cc884d7a34e8d80

[2025-05-22 13:16:54] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=480000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522131654&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K14+-+2025-05-22&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522131654176&vnp_Version=2.1.0&vnp_SecureHash=3ea92155febaa21c41d7437a8e882d3c08db38605fffcef892d0390a0023d0e886e4c7bd48aaea685ca3a239a01d6c98625ec43a377993193cc884d7a34e8d80

[2025-05-22 13:16:54] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 275,
  "orderId": "20250522131654176",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 13:16:54] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=480000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522131654&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K14+-+2025-05-22&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522131654176&vnp_Version=2.1.0&vnp_SecureHash=3ea92155febaa21c41d7437a8e882d3c08db38605fffcef892d0390a0023d0e886e4c7bd48aaea685ca3a239a01d6c98625ec43a377993193cc884d7a34e8d80"
}

[2025-05-22 13:17:47] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "480000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972690",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K14 - 2025-05-22",
    "vnp_PayDate": "20250522131810",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972690",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522131654176",
    "vnp_SecureHash": "68fa8d133ae8959a12877db18bf75010cb4a652983a4c71b1c05152528181addc63a32bb9f7da42c0bda5f994e9e9de39d447bb6536a01e15ed7653b7acae371"
  },
  "ip": "::1"
}

[2025-05-22 13:17:47] Tham số trả về:
{
  "vnp_Amount": "480000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972690",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K14 - 2025-05-22",
  "vnp_PayDate": "20250522131810",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972690",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522131654176",
  "vnp_SecureHash": "68fa8d133ae8959a12877db18bf75010cb4a652983a4c71b1c05152528181addc63a32bb9f7da42c0bda5f994e9e9de39d447bb6536a01e15ed7653b7acae371"
}

[2025-05-22 13:17:47] Xác minh trả về:
{
  "receivedHash": "68fa8d133ae8959a12877db18bf75010cb4a652983a4c71b1c05152528181addc63a32bb9f7da42c0bda5f994e9e9de39d447bb6536a01e15ed7653b7acae371",
  "calculatedHash": "68fa8d133ae8959a12877db18bf75010cb4a652983a4c71b1c05152528181addc63a32bb9f7da42c0bda5f994e9e9de39d447bb6536a01e15ed7653b7acae371",
  "queryString": "vnp_Amount=480000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972690&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K14+-+2025-05-22&vnp_PayDate=20250522131810&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972690&vnp_TransactionStatus=00&vnp_TxnRef=20250522131654176"
}

[2025-05-22 13:17:47] Thanh toán thành công
{
  "orderId": "20250522131654176",
  "amount": 4800000
}

[2025-05-22 13:17:47] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 275,
  "bookingId": 176
}

[2025-05-22 13:17:47] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:17:47] Chuyển hướng đến app di động:
parkingapp://payment-result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=4800000

[2025-05-22 13:22:02] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 13:22:42] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "176",
  "amount": 4800000,
  "orderInfo": "Thanh toán đặt chỗ K14 - 2025-05-22",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 13:22:42] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "176"
}

[2025-05-22 13:22:42] Đã tạo bản ghi thanh toán:
{
  "paymentId": 276,
  "bookingId": "176",
  "amount": 4800000
}

[2025-05-22 13:22:42] Phát hiện URL trả về từ ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:22:42] URL trả về được sử dụng cho VNPay:
https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 13:22:42] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522132242176",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K14 - 2025-05-22",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "480000000",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "192.168.0.100",
  "vnp_CreateDate": "20250522132242",
  "vnp_BankCode": "NCB"
}

[2025-05-22 13:22:42] Chuỗi dữ liệu signData VNPay:
vnp_Amount=480000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522132242&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K14+-+2025-05-22&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522132242176&vnp_Version=2.1.0

[2025-05-22 13:22:42] Chữ ký VNPay đã tạo:
9177e89b6a7fcdee0020e1b9600fb985a555385cf400e35450d21964d78cfd8aa46cfbfce949894bdb42074e7a78f074944c2785d73898e78577236b7da2b4ec

[2025-05-22 13:22:42] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=480000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522132242&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K14+-+2025-05-22&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522132242176&vnp_Version=2.1.0&vnp_SecureHash=9177e89b6a7fcdee0020e1b9600fb985a555385cf400e35450d21964d78cfd8aa46cfbfce949894bdb42074e7a78f074944c2785d73898e78577236b7da2b4ec

[2025-05-22 13:22:42] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 276,
  "orderId": "20250522132242176",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 13:22:42] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=480000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522132242&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K14+-+2025-05-22&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522132242176&vnp_Version=2.1.0&vnp_SecureHash=9177e89b6a7fcdee0020e1b9600fb985a555385cf400e35450d21964d78cfd8aa46cfbfce949894bdb42074e7a78f074944c2785d73898e78577236b7da2b4ec"
}

[2025-05-22 13:23:15] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "480000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972700",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K14 - 2025-05-22",
    "vnp_PayDate": "20250522132338",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972700",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522132242176",
    "vnp_SecureHash": "af3be6e77c4a2e047cac84296a9bff186b2ab3e3579e3a2df44485d9286afc41fb7a35e82971d97446cb84a1aedec86651b08a2d80c35ecba858915dcbcf89c2"
  },
  "ip": "::1"
}

[2025-05-22 13:23:15] Tham số trả về:
{
  "vnp_Amount": "480000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972700",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K14 - 2025-05-22",
  "vnp_PayDate": "20250522132338",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972700",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522132242176",
  "vnp_SecureHash": "af3be6e77c4a2e047cac84296a9bff186b2ab3e3579e3a2df44485d9286afc41fb7a35e82971d97446cb84a1aedec86651b08a2d80c35ecba858915dcbcf89c2"
}

[2025-05-22 13:23:15] Xác minh trả về:
{
  "receivedHash": "af3be6e77c4a2e047cac84296a9bff186b2ab3e3579e3a2df44485d9286afc41fb7a35e82971d97446cb84a1aedec86651b08a2d80c35ecba858915dcbcf89c2",
  "calculatedHash": "af3be6e77c4a2e047cac84296a9bff186b2ab3e3579e3a2df44485d9286afc41fb7a35e82971d97446cb84a1aedec86651b08a2d80c35ecba858915dcbcf89c2",
  "queryString": "vnp_Amount=480000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972700&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K14+-+2025-05-22&vnp_PayDate=20250522132338&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972700&vnp_TransactionStatus=00&vnp_TxnRef=20250522132242176"
}

[2025-05-22 13:23:15] Thanh toán thành công
{
  "orderId": "20250522132242176",
  "amount": 4800000
}

[2025-05-22 13:23:15] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 276,
  "bookingId": 176
}

[2025-05-22 13:23:15] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:23:15] Chuyển hướng đến trang web (áp dụng cho tất cả thiết bị):
https://eca6-113-22-46-72.ngrok-free.app/api/payment/result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=4800000

[2025-05-22 13:26:01] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 13:26:03] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 13:26:47] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 13:26:49] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 13:32:19] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "177",
  "amount": 4800000,
  "orderInfo": "Thanh toán đặt chỗ K13 - 2025-05-22",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 13:32:19] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "177"
}

[2025-05-22 13:32:19] Đã tạo bản ghi thanh toán:
{
  "paymentId": 278,
  "bookingId": "177",
  "amount": 4800000
}

[2025-05-22 13:32:19] Phát hiện URL trả về từ ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:32:19] URL trả về được sử dụng cho VNPay:
https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 13:32:19] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522133219177",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K13 - 2025-05-22",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "480000000",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "192.168.0.100",
  "vnp_CreateDate": "20250522133219",
  "vnp_BankCode": "NCB"
}

[2025-05-22 13:32:19] Chuỗi dữ liệu signData VNPay:
vnp_Amount=480000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522133219&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K13+-+2025-05-22&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522133219177&vnp_Version=2.1.0

[2025-05-22 13:32:19] Chữ ký VNPay đã tạo:
60fa7d882133a32945fccd7cc908cbf13a06d39d5a4d16d8906107ee660b70a6018588aab465b45f862bd4abe14fee46df516fcacc944369440ef0739122c09e

[2025-05-22 13:32:19] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=480000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522133219&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K13+-+2025-05-22&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522133219177&vnp_Version=2.1.0&vnp_SecureHash=60fa7d882133a32945fccd7cc908cbf13a06d39d5a4d16d8906107ee660b70a6018588aab465b45f862bd4abe14fee46df516fcacc944369440ef0739122c09e

[2025-05-22 13:32:19] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 278,
  "orderId": "20250522133219177",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 13:32:19] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=480000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522133219&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K13+-+2025-05-22&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522133219177&vnp_Version=2.1.0&vnp_SecureHash=60fa7d882133a32945fccd7cc908cbf13a06d39d5a4d16d8906107ee660b70a6018588aab465b45f862bd4abe14fee46df516fcacc944369440ef0739122c09e"
}

[2025-05-22 13:33:02] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "480000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972714",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K13 - 2025-05-22",
    "vnp_PayDate": "20250522133325",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972714",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522133219177",
    "vnp_SecureHash": "be169be9bb36e08bc3a6986bd7735f136f91b105df0530a1dd77a84886348847228ef0730c82efd233bda8d89162b6bb20ac063875a82203924100cfce14af0f"
  },
  "ip": "::1"
}

[2025-05-22 13:33:02] Tham số trả về:
{
  "vnp_Amount": "480000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972714",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K13 - 2025-05-22",
  "vnp_PayDate": "20250522133325",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972714",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522133219177",
  "vnp_SecureHash": "be169be9bb36e08bc3a6986bd7735f136f91b105df0530a1dd77a84886348847228ef0730c82efd233bda8d89162b6bb20ac063875a82203924100cfce14af0f"
}

[2025-05-22 13:33:02] Xác minh trả về:
{
  "receivedHash": "be169be9bb36e08bc3a6986bd7735f136f91b105df0530a1dd77a84886348847228ef0730c82efd233bda8d89162b6bb20ac063875a82203924100cfce14af0f",
  "calculatedHash": "be169be9bb36e08bc3a6986bd7735f136f91b105df0530a1dd77a84886348847228ef0730c82efd233bda8d89162b6bb20ac063875a82203924100cfce14af0f",
  "queryString": "vnp_Amount=480000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972714&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K13+-+2025-05-22&vnp_PayDate=20250522133325&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972714&vnp_TransactionStatus=00&vnp_TxnRef=20250522133219177"
}

[2025-05-22 13:33:02] Thanh toán thành công
{
  "orderId": "20250522133219177",
  "amount": 4800000
}

[2025-05-22 13:33:02] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 278,
  "bookingId": 177
}

[2025-05-22 13:33:03] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:33:03] Chuyển hướng đến trang web (áp dụng cho tất cả thiết bị):
https://eca6-113-22-46-72.ngrok-free.app/api/payment/result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=4800000

[2025-05-22 13:35:36] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 13:38:23] === YÊU CẦU TẠO THANH TOÁN VNPAY ===
{
  "bookingId": "178",
  "amount": 4800000,
  "orderInfo": "Thanh toán đặt chỗ K07 - 2025-05-22",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 13:38:23] Kết quả kiểm tra đặt chỗ:
{
  "found": true,
  "bookingId": "178"
}

[2025-05-22 13:38:23] Đã tạo bản ghi thanh toán:
{
  "paymentId": 280,
  "bookingId": "178",
  "amount": 4800000
}

[2025-05-22 13:38:23] Phát hiện URL trả về từ ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:38:23] URL trả về được sử dụng cho VNPay:
https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return

[2025-05-22 13:38:23] Tham số gốc VNPay:
{
  "vnp_Version": "2.1.0",
  "vnp_Command": "pay",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_Locale": "vn",
  "vnp_CurrCode": "VND",
  "vnp_TxnRef": "20250522133823178",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K07 - 2025-05-22",
  "vnp_OrderType": "billpayment",
  "vnp_Amount": "480000000",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpAddr": "192.168.0.100",
  "vnp_CreateDate": "20250522133823",
  "vnp_BankCode": "NCB"
}

[2025-05-22 13:38:23] Chuỗi dữ liệu signData VNPay:
vnp_Amount=480000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522133823&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K07+-+2025-05-22&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522133823178&vnp_Version=2.1.0

[2025-05-22 13:38:23] Chữ ký VNPay đã tạo:
2f6a53baf2e8394d740f418cefc7e28b4c221d4662da8c67adb502f09a29729842a23e52651d354b95eaaa25c2693053430833fa91a3b3390460a65eaf196b9d

[2025-05-22 13:38:23] URL thanh toán VNPay:
https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=480000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522133823&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K07+-+2025-05-22&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522133823178&vnp_Version=2.1.0&vnp_SecureHash=2f6a53baf2e8394d740f418cefc7e28b4c221d4662da8c67adb502f09a29729842a23e52651d354b95eaaa25c2693053430833fa91a3b3390460a65eaf196b9d

[2025-05-22 13:38:23] Cập nhật bản ghi thanh toán với reference_id:
{
  "paymentId": 280,
  "orderId": "20250522133823178",
  "returnUrl": "parkingapp://payment-result"
}

[2025-05-22 13:38:23] === TẠO THANH TOÁN VNPAY THÀNH CÔNG ===
{
  "paymentUrl": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html?vnp_Amount=480000000&vnp_BankCode=NCB&vnp_Command=pay&vnp_CreateDate=20250522133823&vnp_CurrCode=VND&vnp_IpAddr=192.168.0.100&vnp_Locale=vn&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K07+-+2025-05-22&vnp_OrderType=billpayment&vnp_ReturnUrl=https%3A%2F%2Feca6-113-22-46-72.ngrok-free.app%2Fapi%2Fpayment%2Fvnpay-return&vnp_TmnCode=BXG8SRK8&vnp_TxnRef=20250522133823178&vnp_Version=2.1.0&vnp_SecureHash=2f6a53baf2e8394d740f418cefc7e28b4c221d4662da8c67adb502f09a29729842a23e52651d354b95eaaa25c2693053430833fa91a3b3390460a65eaf196b9d"
}

[2025-05-22 13:38:46] === XỬ LÝ CALLBACK TRẢ VỀ TỪ VNPAY ===
{
  "query": {
    "vnp_Amount": "480000000",
    "vnp_BankCode": "NCB",
    "vnp_BankTranNo": "VNP14972728",
    "vnp_CardType": "ATM",
    "vnp_OrderInfo": "Thanh toán đặt chỗ K07 - 2025-05-22",
    "vnp_PayDate": "20250522133908",
    "vnp_ResponseCode": "00",
    "vnp_TmnCode": "BXG8SRK8",
    "vnp_TransactionNo": "14972728",
    "vnp_TransactionStatus": "00",
    "vnp_TxnRef": "20250522133823178",
    "vnp_SecureHash": "57aaa4d814a3659126334d5dc16e5a90947d85f70198e3d45a09be231c92508e54dc67c058ff9bde6bdd6287097f1022a5291458073b72f42681f664931a4c65"
  },
  "ip": "::1"
}

[2025-05-22 13:38:46] Tham số trả về:
{
  "vnp_Amount": "480000000",
  "vnp_BankCode": "NCB",
  "vnp_BankTranNo": "VNP14972728",
  "vnp_CardType": "ATM",
  "vnp_OrderInfo": "Thanh toán đặt chỗ K07 - 2025-05-22",
  "vnp_PayDate": "20250522133908",
  "vnp_ResponseCode": "00",
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_TransactionNo": "14972728",
  "vnp_TransactionStatus": "00",
  "vnp_TxnRef": "20250522133823178",
  "vnp_SecureHash": "57aaa4d814a3659126334d5dc16e5a90947d85f70198e3d45a09be231c92508e54dc67c058ff9bde6bdd6287097f1022a5291458073b72f42681f664931a4c65"
}

[2025-05-22 13:38:46] Xác minh trả về:
{
  "receivedHash": "57aaa4d814a3659126334d5dc16e5a90947d85f70198e3d45a09be231c92508e54dc67c058ff9bde6bdd6287097f1022a5291458073b72f42681f664931a4c65",
  "calculatedHash": "57aaa4d814a3659126334d5dc16e5a90947d85f70198e3d45a09be231c92508e54dc67c058ff9bde6bdd6287097f1022a5291458073b72f42681f664931a4c65",
  "queryString": "vnp_Amount=480000000&vnp_BankCode=NCB&vnp_BankTranNo=VNP14972728&vnp_CardType=ATM&vnp_OrderInfo=Thanh+to%C3%A1n+%C4%91%E1%BA%B7t+ch%E1%BB%97+K07+-+2025-05-22&vnp_PayDate=20250522133908&vnp_ResponseCode=00&vnp_TmnCode=BXG8SRK8&vnp_TransactionNo=14972728&vnp_TransactionStatus=00&vnp_TxnRef=20250522133823178"
}

[2025-05-22 13:38:46] Thanh toán thành công
{
  "orderId": "20250522133823178",
  "amount": 4800000
}

[2025-05-22 13:38:46] Đã cập nhật cơ sở dữ liệu cho thanh toán thành công
{
  "paymentId": 280,
  "bookingId": 178
}

[2025-05-22 13:38:46] Tìm thấy URL trả về cho ứng dụng di động:
parkingapp://payment-result

[2025-05-22 13:38:46] Chuyển hướng đến trang web (áp dụng cho tất cả thiết bị):
https://eca6-113-22-46-72.ngrok-free.app/api/payment/result?status=success&message=Thanh%20to%C3%A1n%20th%C3%A0nh%20c%C3%B4ng&amount=4800000

[2025-05-22 17:22:38] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 18:26:19] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 18:48:07] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 19:05:20] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 19:06:07] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 19:06:18] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 19:15:02] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 19:15:04] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 23:51:43] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}

[2025-05-22 23:54:21] VNPay Configuration:
{
  "vnp_TmnCode": "BXG8SRK8",
  "vnp_HashSecret": "CCO21KBSH3AZNGQAQO7YT9K1V0X88NEV",
  "vnp_Url": "https://sandbox.vnpayment.vn/paymentv2/vpcpay.html",
  "vnp_ReturnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-return",
  "vnp_IpnUrl": "https://eca6-113-22-46-72.ngrok-free.app/api/payment/vnpay-ipn"
}
